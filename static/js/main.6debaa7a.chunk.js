(this.webpackJsonphexagonal2048=this.webpackJsonphexagonal2048||[]).push([[0],{20:function(e,t,a){e.exports={GameField:"styles_GameField__3hfdo",row:"styles_row__2HNAo",item:"styles_item__1hvrl",pointy:"styles_pointy__3O4RL",cellsAppeared:"styles_cellsAppeared__29Nca"}},30:function(e,t,a){e.exports={Game:"styles_Game__116Rh",gameTitle:"styles_gameTitle__kjZDa",main:"styles_main__1nWvf"}},42:function(e,t,a){e.exports={NumericInput:"styles_NumericInput__3EzZk"}},43:function(e,t,a){e.exports={RadioButtons:"styles_RadioButtons__2MtDp"}},49:function(e,t,a){e.exports=a(77)},5:function(e,t,a){e.exports={Controls:"styles_Controls__1i-bK",column:"styles_column__10bZm",settings:"styles_settings__WGKl8",gameStatus:"styles_gameStatus__1PGuQ",startOver:"styles_startOver__1voyR",arrows:"styles_arrows__3affh",arrow:"styles_arrow__3IVv-",text:"styles_text__1p2ML",flat:"styles_flat__3rrgu",columnSettings:"styles_columnSettings__1Agex",mirrored:"styles_mirrored__2PazO"}},77:function(e,t,a){"use strict";a.r(t);var n,r,c,l,o=a(0),i=a.n(o),u=a(24),s=a.n(u),m=a(18),d=[3,250],f=[2,20];!function(e){e.InProgress="in-progress",e.Finished="finished"}(n||(n={})),function(e){e.Pointy="pointy",e.Flat="flat"}(r||(r={})),function(e){e.Online="online",e.Offline="offline"}(c||(c={})),function(e){e.Bottom="bottom",e.BottomLeft="bottom-left",e.BottomRight="bottom-right",e.Top="top",e.TopLeft="top-left",e.TopRight="top-right"}(l||(l={}));var p=["KeyQ","KeyW","KeyE","KeyA","KeyS","KeyD"],E=["KeyW","KeyE","KeyA","KeyF","KeyS","KeyD"],b={KeyE:l.TopLeft,KeyW:l.Top,KeyQ:l.TopRight,KeyD:l.BottomLeft,KeyS:l.Bottom,KeyA:l.BottomRight},v={KeyW:l.TopRight,KeyE:l.BottomRight,KeyA:l.Top,KeyF:l.Bottom,KeyS:l.TopLeft,KeyD:l.BottomLeft};function g(e,t){var a={};for(var n in e)a[n]="".concat(t,"_").concat(n);return a}var O=g({CHANGE_GAME_PLAY_MODE:null,CHANGE_GAME_SIZE:null,CHANGE_SERVER_URL:null,INITIATE_FIELD:null,MOVE:null,SET_APP_STATUS:null,SET_CELL_SIZE:null,SET_GAME_PLAY_MODE:null,SET_GAME_MODE:null,SET_GAME_SIZE:null,SET_URL:null,START_OVER:null},"Controls"),y=function(e){return{type:O.MOVE,payload:{direction:e}}},_=function(e){return{type:O.SET_APP_STATUS,payload:{appStatus:e}}},h=function(e){return{type:O.SET_GAME_SIZE,payload:{gameSize:e}}},S=function(e){return{type:O.SET_URL,payload:{url:e}}},j=function(e){return{type:O.SET_GAME_PLAY_MODE,payload:{gamePlayMode:e}}},x=a(47),T=a(27),w=a(17),N=a(9),M=a(19),A=a.n(M),C=a(41),k=a.n(C),L=a(42),z=a.n(L),G=function(e){var t=e.onChange,a=e.id,n=e.value,r=e.label,c=e.disabled,l=Object(N.a)(e.range,2),u=l[0],s=l[1],m=e.step,d=void 0===m?1:m,f=e.integer,p=void 0===f||f,E=Object(o.useState)(n),b=Object(N.a)(E,2),v=b[0],g=b[1];Object(o.useEffect)((function(){g(n)}),[n]);var O=Object(o.useCallback)((function(e){var t=e.target.value;if(""!==t){var a=Number(t);isFinite(a)&&g(a)}else g(t)}),[g]),y=Object(o.useCallback)((function(){if(""!==v){var e=p?parseInt(String(v),10):Number(v),a=k()(e,u,s);a!==n&&(g(n),t(a))}else g(n)}),[v,p,u,s,n,t]),_=Object(o.useCallback)((function(e){"Enter"===e.key&&y(e)}),[y]);return i.a.createElement("div",{className:z.a.NumericInput},i.a.createElement("input",{type:"number",id:a,min:u,max:s,step:d,disabled:c,value:v,onChange:O,onBlur:y,onKeyDown:_}),i.a.createElement("label",{htmlFor:a},"".concat(r," (").concat(u," - ").concat(s,")")))},R=a(43),I=a.n(R),P=function(e){var t=e.title,a=e.checkedId,n=e.options,r=e.onChange,c=Object(o.useCallback)((function(e){r(e.target.id)}),[r]);return i.a.createElement("form",{className:I.a.RadioButtons},i.a.createElement("p",null,t),n.map((function(e){var t=e.id,n=e.label;return i.a.createElement("div",{key:t},i.a.createElement("input",{type:"radio",id:t,checked:a===t,onChange:c}),i.a.createElement("label",{htmlFor:t},n))})))},D=a(5),F=a.n(D),K=function(e){var t=e.move,a=e.disabled;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.Top)}},i.a.createElement("span",{className:F.a.arrow},"\u279c"),i.a.createElement("span",{className:F.a.text},"W"))),i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.TopRight)}},i.a.createElement("span",{className:F.a.arrow},"\u279c"),i.a.createElement("span",{className:F.a.text},"Q")),i.a.createElement("button",{disabled:a,onClick:function(){return t(l.TopLeft)}},i.a.createElement("span",{className:F.a.text},"E"),i.a.createElement("span",{className:F.a.arrow},"\u279c"))),i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.BottomRight)}},i.a.createElement("span",{className:F.a.text},"A"),i.a.createElement("span",{className:F.a.arrow},"\u279c")),i.a.createElement("button",{disabled:a,onClick:function(){return t(l.BottomLeft)}},i.a.createElement("span",{className:F.a.arrow},"\u279c"),i.a.createElement("span",{className:F.a.text},"D"))),i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.Bottom)}},i.a.createElement("span",{className:F.a.text},"S"),i.a.createElement("span",{className:F.a.arrow},"\u279c"))))},B=function(e){var t=e.move,a=e.disabled;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.TopRight)}},i.a.createElement("span",{className:F.a.arrow},"\u279c"),i.a.createElement("span",{className:F.a.text},"W")),i.a.createElement("button",{disabled:a,onClick:function(){return t(l.BottomRight)}},i.a.createElement("span",{className:F.a.text},"E"),i.a.createElement("span",{className:F.a.arrow},"\u279c"))),i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.Top)}},i.a.createElement("span",{className:F.a.text},"A"),i.a.createElement("span",{className:F.a.arrow},"\u279c")),i.a.createElement("button",{disabled:a,onClick:function(){return t(l.Bottom)}},i.a.createElement("span",{className:F.a.arrow},"\u279c"),i.a.createElement("span",{className:F.a.text},"F"))),i.a.createElement("div",null,i.a.createElement("button",{disabled:a,onClick:function(){return t(l.TopLeft)}},i.a.createElement("span",{className:F.a.text},"S"),i.a.createElement("span",{className:F.a.arrow},"\u279c")),i.a.createElement("button",{disabled:a,onClick:function(){return t(l.BottomLeft)}},i.a.createElement("span",{className:F.a.arrow},"\u279c"),i.a.createElement("span",{className:F.a.text},"D"))))},U=function(e){return e.controls},H=function(e){return U(e).gameSize},W=function(e){return U(e).valuesToAdd},V=function(e){return U(e).gameMode},Z=function(e){return U(e).gamePlayMode},Y=function(e){return U(e).appStatus},J=function(e){return U(e).cellSize},Q=function(e){return U(e).url},q=Object(T.a)({appStatus:Y,cellSize:J,gameMode:V,gamePlayMode:Z,gameSize:H,url:Q}),X={changeGamePlayMode:function(e){return{type:O.CHANGE_GAME_PLAY_MODE,payload:{gamePlayMode:e}}},changeGameSize:function(e){return{type:O.CHANGE_GAME_SIZE,payload:{gameSize:e}}},changeServerUrl:function(e){return{type:O.CHANGE_SERVER_URL,payload:{url:e}}},move:y,setCellSize:function(e){return{type:O.SET_CELL_SIZE,payload:{cellSize:e}}},setGameMode:function(e){return{type:O.SET_GAME_MODE,payload:{gameMode:e}}},startOver:function(){return{type:O.START_OVER}}},$=Object(m.b)(q,X)((function(e){var t=e.appStatus,a=e.startOver,l=e.move,u=e.gameMode,s=e.setGameMode,m=e.gamePlayMode,p=e.changeGamePlayMode,E=e.gameSize,b=e.changeGameSize,v=e.cellSize,g=e.setCellSize,O=e.url,y=e.changeServerUrl,_=Object(o.useState)(!!window.TEST_MODE),h=Object(N.a)(_,2),S=h[0],j=h[1],x=Object(o.useCallback)((function(){return j((function(e){return!e}))}),[j]),T=Object(o.useCallback)((function(e){return y(e.target.value)}),[y]),M=u===r.Flat,C=t===n.Finished;return i.a.createElement("div",{className:F.a.Controls},i.a.createElement("div",{className:A()(F.a.column,F.a.columnSettings)},i.a.createElement("div",{className:F.a.gameStatus,"data-status":C?"game-over":"playing"},"Game status: ",i.a.createElement("span",null,C?"Game Over":"Playing")),i.a.createElement("div",{className:F.a.settings},i.a.createElement("p",{onClick:x},i.a.createElement("span",{className:A()(Object(w.a)({},F.a.mirrored,S))},"\u25be"),"Game settings (click to expand/collapse)"),S&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("button",{className:F.a.startOver,onClick:a},"Start over")),i.a.createElement("div",null,i.a.createElement(G,{id:"game_size",value:E,label:"Game size",range:f,onChange:b})),i.a.createElement("div",null,i.a.createElement(G,{id:"hexagon_size",value:v,label:"Hexagon size",range:d,onChange:g})),i.a.createElement("div",null,i.a.createElement(P,{title:"Select a visual game mode:",options:[{id:r.Flat,label:"Flat topped"},{id:r.Pointy,label:"Pointy topped"}],checkedId:u,onChange:s})),i.a.createElement("div",null,i.a.createElement(P,{title:"Select a play game mode:",options:[{id:c.Offline,label:"Offline: generate data locally"},{id:c.Online,label:"Online: play with server data"}],checkedId:m,onChange:p})),m===c.Online&&i.a.createElement("select",{id:"url-server",onChange:T,value:O},i.a.createElement("option",{id:"remote",value:"https://68f02c80-3bed-4e10-a747-4ff774ae905a.pub.instances.scw.cloud/"},"Remote server"),i.a.createElement("option",{id:"localhost",value:"http://localhost:13337/"},"Local server"))))),i.a.createElement("div",{className:A()(F.a.column,F.a.arrows,Object(w.a)({},F.a.flat,M))},M?i.a.createElement(B,{move:l,disabled:C}):i.a.createElement(K,{move:l,disabled:C}),i.a.createElement("p",null,"Use keyboard or these buttons")))})),ee=a(8),te=a(12);function ae(e,t){var a=Object(N.a)(e,3),n=a[0]+1-t,r=a[1]+1-t;return{x:r,y:-r-n,z:n,value:a[2]}}function ne(e,t){var a=e.x;return[e.z+t-1,a+t-1,e.value]}function re(e){return e.map((function(e){return e.filter((function(e){return e&&!e[2]}))})).flat(1)}function ce(e){return e.map((function(e){return e.filter((function(e){return e&&!!e[2]}))})).flat(1)}var le=a(20),oe=a.n(le),ie=function(e){return e.gameField},ue=function(e){return ie(e).field},se=Object(T.a)({appearedCells:function(e){return ie(e).animation.appearedCells},field:ue,gameMode:V,gameSize:H,appStatus:Y,cellSize:J}),me={initiateField:function(){return{type:O.INITIATE_FIELD}}},de=Object(m.b)(se,me)((function(e){var t=e.appearedCells,a=e.appStatus,c=e.field,l=e.gameMode,o=e.gameSize,u=e.cellSize,s=e.initiateField,m=a===n.Finished,d=l===r.Pointy,f="".concat(u,"px"),p={width:f,height:f,lineHeight:f,fontSize:"".concat(u/2.5,"px"),padding:"0 ".concat(.1*u,"px"),marginRight:"".concat(d?0:.125*u,"px"),marginBottom:"".concat(d?.125*u:0,"px"),opacity:m?.55:1},E=!!window.DEV_MODE;return 0===ce(c).length&&s(),i.a.createElement("div",{className:A()(oe.a.GameField,Object(w.a)({},oe.a.pointy,d))},c.map((function(e,a){return i.a.createElement("div",{className:oe.a.row,key:a},e.map((function(e){if(!e)return null;var a=Object(N.a)(e,3),n=a[0],r=a[1],c=a[2],l=c||"",u=E?"q: ".concat(n,", r: ").concat(r,", value: ").concat(c):String(l),s=c&&Math.log2(c),m=s?Object(te.clamp)(255-10*s,165,255):255,d=s?Object(te.clamp)(255-10*s*3,0,255):255,f=t.some((function(e){var t=Object(N.a)(e,2),a=t[0],c=t[1];return n===a&&r===c})),b=Object(ee.a)(Object(ee.a)({},p),{},{backgroundColor:"rgba(255, ".concat(m,", ").concat(d,")")});f&&(b.animationName=oe.a.cellsAppeared);var v=ae(e,o),g=v.x,O=v.y,y=v.z;return i.a.createElement("div",{key:e.join()+f?Math.random():"",className:oe.a.item,style:b,title:u,"data-x":g,"data-y":O,"data-z":y,"data-value":c||0},l)})))})))})),fe=a(30),pe=a.n(fe),Ee=function(){return i.a.createElement("div",{className:pe.a.Game},i.a.createElement("header",null,i.a.createElement("h1",{className:pe.a.gameTitle},"Hexagonal 2048"),i.a.createElement($,null)),i.a.createElement("main",{className:pe.a.main},i.a.createElement(de,null)))},be=(a(66),function(){return i.a.createElement(x.a,null,i.a.createElement(Ee,null))}),ve=a(15),ge=a(11),Oe=a(45),ye=a(48),_e=a(13),he={parsed:!1,gameSize:0};function Se(){if(he.parsed)return he}function je(){var e=function(e,t){if(he.parsed)return Se();var a=window.location.hash;if(a.startsWith("#test")){window.TEST_MODE=!0;var n=parseInt(a.replace("#test",""),10),r=isNaN(n)?e:te.clamp.apply(void 0,[n].concat(Object(_e.a)(t)));return he.parsed=!0,he.gameSize=r,Se()}}(3,f);return e?{gamePlayMode:c.Online,gameSize:e.gameSize,url:"http://localhost:13337/"}:{gamePlayMode:c.Offline,gameSize:3,url:"https://68f02c80-3bed-4e10-a747-4ff774ae905a.pub.instances.scw.cloud/"}}function xe(e){return Array.from({length:Math.max(2,e-2)}).map((function(e,t){return Math.pow(2,t)})).slice(1)}var Te=je(),we=Te.gameSize,Ne=Te.gamePlayMode,Me=Te.url,Ae={gameSize:we,valuesToAdd:xe(we),gameMode:r.Pointy,gamePlayMode:Ne,appStatus:n.InProgress,cellSize:40,url:Me},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.SET_GAME_SIZE:return ke(e,t);case O.SET_GAME_MODE:return Le(e,t);case O.SET_GAME_PLAY_MODE:return ze(e,t);case O.SET_APP_STATUS:return Ge(e,t);case O.SET_CELL_SIZE:return Re(e,t);case O.SET_URL:return Ie(e,t);default:return e}},ke=function(e,t){var a=t.payload.gameSize;return Object(ee.a)(Object(ee.a)({},e),{},{gameSize:a,valuesToAdd:xe(a)})},Le=function(e,t){var a=t.payload.gameMode;return Object(ee.a)(Object(ee.a)({},e),{},{gameMode:a})},ze=function(e,t){var a=t.payload.gamePlayMode;return Object(ee.a)(Object(ee.a)({},e),{},{gamePlayMode:a})},Ge=function(e,t){var a=t.payload.appStatus;return Object(ee.a)(Object(ee.a)({},e),{},{appStatus:a})},Re=function(e,t){var a=t.payload.cellSize;return Object(ee.a)(Object(ee.a)({},e),{},{cellSize:a})},Ie=function(e,t){var a=t.payload.url;return Object(ee.a)(Object(ee.a)({},e),{},{url:a})},Pe=a(7),De=a.n(Pe),Fe=a(46),Ke=a(29),Be=a.n(Ke);function Ue(e,t){var a=function(e,t){var a=e.length;if(a<=t)return e;for(var n=new Set;n.size<t;)n.add(Be()(0,a-1));return Array.from(n).map((function(t){return e[t]}))}(re(e),2);return a.forEach((function(a){var n=Object(N.a)(a,2),r=n[0],c=n[1],l=t[Be()(0,t.length-1)];e[c][r][2]=l})),a}function He(e,t,a){return We.apply(this,arguments)}function We(){return(We=Object(Fe.a)(De.a.mark((function e(t,a,n){var r,c,l,o,i;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==re(a).length){e.next=2;break}return e.abrupt("return",[]);case 2:return r=ce(a),c=JSON.stringify(r.map((function(e){return ae(e,n)}))),e.next=6,fetch(t,{method:"POST",body:c});case 6:return l=e.sent,e.next=9,l.json();case 9:return o=e.sent,(i=o.map((function(e){return ne(e,n)}))).forEach((function(e){var t=Object(N.a)(e,3),n=t[0],r=t[1],c=t[2];a[r][n][2]=c})),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t){var a=function(e){var t=2*e-1,a=Math.floor(t/2);return Array.from({length:t}).map((function(e,n){return Array.from({length:t}).map((function(e,r){return n<a&&a>r+n||n>a&&t<=n+r-a?null:[r,n,null]}))}))}(e),n=[];t===c.Offline&&(n=Ue(a,xe(e)));return{field:a,addedCells:n}}var Ze=g({SET_FIELD:null,SET_NEW_CELLS_TO_ANIMATE:null},"GameField"),Ye=je(),Je=Ve(Ye.gameSize,Ye.gamePlayMode),Qe={field:Je.field,animation:{appearedCells:Je.addedCells}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze.SET_FIELD:return Xe(e,t);case Ze.SET_NEW_CELLS_TO_ANIMATE:return $e(e,t);default:return e}},Xe=function(e,t){var a=t.payload.field;return Object(ee.a)(Object(ee.a)({},e),{},{field:a})},$e=function(e,t){var a=t.payload.cells;return Object(ee.a)(Object(ee.a)({},e),{},{animation:Object(ee.a)(Object(ee.a)({},null===e||void 0===e?void 0:e.animation),{},{appearedCells:a})})},et=Object(ve.combineReducers)({controls:Ce,gameField:qe}),tt=a(3),at=function(e){return{type:Ze.SET_FIELD,payload:{field:e}}},nt=function(e){return{type:Ze.SET_NEW_CELLS_TO_ANIMATE,payload:{cells:e}}},rt=De.a.mark(ct);function ct(e){var t,a,r,c,l;return De.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,confirm("Do you want to start a new game in other mode?")){o.next=4;break}return o.abrupt("return");case 4:return t=e.payload.gamePlayMode,o.next=7,Object(tt.d)(H);case 7:return a=o.sent,r=Ve(a,t),c=r.field,l=r.addedCells,o.next=11,Object(tt.c)(Object(ge.a)([h(a),at(c),_(n.InProgress),j(t),nt(l)]));case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),console.warn("Error occurred during changing game play mode.",o.t0);case 16:case"end":return o.stop()}}),rt,null,[[0,13]])}var lt=De.a.mark(ot);function ot(e){var t,a,r,c,l;return De.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,confirm("Do you want to start a new game?")){o.next=4;break}return o.abrupt("return");case 4:return t=e.payload.gameSize,o.next=7,Object(tt.d)(Z);case 7:return a=o.sent,r=Ve(t,a),c=r.field,l=r.addedCells,o.next=11,Object(tt.c)(Object(ge.a)([h(t),at(c),_(n.InProgress),nt(l)]));case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),console.warn("Error occurred during changing game size.",o.t0);case 16:case"end":return o.stop()}}),lt,null,[[0,13]])}var it=De.a.mark(ut);function ut(e){var t,a,r,c,l,o;return De.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,window.TEST_MODE){i.next=5;break}if(confirm("Do you want to start a new game with data from another server?")){i.next=5;break}return i.abrupt("return");case 5:return t=e.payload.url,i.next=8,Object(tt.d)(Z);case 8:return a=i.sent,i.next=11,Object(tt.d)(H);case 11:return r=i.sent,c=Ve(r,a),l=c.field,o=c.addedCells,i.next=15,Object(tt.c)(Object(ge.a)([S(t),at(l),_(n.InProgress),nt(o)]));case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),console.warn("Error occurred during changing server url.",i.t0);case 20:case"end":return i.stop()}}),it,null,[[0,17]])}function st(e,t,a,n,r){var c=t[a][n];if(c){var l=Object(N.a)(c,3)[2];if(l){var o=r(e,a,n),i=r(t,a,n),u=i.indexOf(c),s=o.slice(u+1),m=i.slice(u+1),d=i[u+1],f=u===i.length-1||!d,p=null!==(null===d||void 0===d?void 0:d[2])&&(null===d||void 0===d?void 0:d[2])!==l;if(!f&&!p){var E=m.find((function(e){return e&&!!e[2]}));if(E){var b=s.find((function(e){return e&&!!e[2]}))||[],v=Object(N.a)(b,3)[2];if(Object(N.a)(E,3)[2]===l&&v===l)E[2]+=l,c[2]=null;else{var g=i.indexOf(E);i[g-1][2]+=l,c[2]=null}}else{m.slice().reverse().find((function(e){return e&&!e[2]}))[2]=l,c[2]=null}}}}}function mt(e,t,a){var n=t.length;if(a===l.Bottom)for(var r=function(e,t){return e[t]},c=n-1;c>=0;c--)for(var o=0;o<n;o++)st(e,t,o,c,r);if(a===l.Top)for(var i=function(e,t){return e[t].slice().reverse()},u=0;u<n;u++)for(var s=0;s<n;s++)st(e,t,s,u,i);if(a===l.BottomLeft)for(var m=function(e,t,a){return e.map((function(e){return e[a]}))},d=0;d<n;d++)for(var f=n-1;f>=0;f--)st(e,t,f,d,m);if(a===l.TopRight)for(var p=function(e,t,a){return e.map((function(e){return e[a]})).reverse()},E=0;E<n;E++)for(var b=0;b<n;b++)st(e,t,b,E,p);if(a===l.BottomRight){var v=function(e,t,a){return e.reduce((function(e,n){return n.forEach((function(n){if(n){var r=Object(N.a)(n,2),c=r[0],l=r[1];t+a===c+l&&e.push(n)}})),e}),[])},g=function(){return v.apply(void 0,arguments).reverse()},O=t[0],y=t.map((function(e){return e[n-1]})).slice(1);[].concat(Object(_e.a)(O),Object(_e.a)(y)).filter(Boolean).map((function(e){return v(t,e[1],e[0])})).flat().forEach((function(a){st(e,t,a[1],a[0],g)}))}if(a===l.TopLeft){var _=function(e,t,a){return e.reduce((function(e,n){return n.forEach((function(n){if(n){var r=Object(N.a)(n,2),c=r[0],l=r[1];t+a===c+l&&e.push(n)}})),e}),[])},h=t.map((function(e){return e[0]})),S=t[n-1].slice(1);[].concat(Object(_e.a)(h),Object(_e.a)(S)).filter(Boolean).map((function(e){return function(){return _.apply(void 0,arguments).reverse()}(t,e[1],e[0])})).flat().forEach((function(a){st(e,t,a[1],a[0],_)}))}}function dt(e){if(0!==re(e).length)return!0;var t=Object.values(l),a=Object(te.cloneDeep)(e);return t.forEach((function(e){mt(Object(te.cloneDeep)(a),a,e)})),!Object(te.isEqual)(e,a)}function ft(e,t){return new URL(String(t),window.RNG_SERVER_URL||e).href}var pt=De.a.mark(Et);function Et(e){var t,a,n,r;return De.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(tt.d)(Z);case 2:if(l.sent!==c.Online){l.next=22;break}return l.next=6,Object(tt.d)(Q);case 6:return a=l.sent,l.next=9,Object(tt.d)(H);case 9:return n=l.sent,l.prev=10,l.next=13,Object(tt.b)(He,ft(a,n),e,n);case 13:t=l.sent,l.next=20;break;case 16:throw l.prev=16,l.t0=l.catch(10),alert("The server is currently not available. Please select offline play mode."),new Error("The server is currently not available.");case 20:l.next=26;break;case 22:return l.next=24,Object(tt.d)(W);case 24:r=l.sent,t=Ue(e,r);case 26:return console.log(JSON.stringify(t)),l.abrupt("return",t);case 28:case"end":return l.stop()}}),pt,null,[[10,16]])}var bt=De.a.mark(vt);function vt(e){var t,a,r,c;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(tt.d)(ue);case 3:return t=e.sent,a=Object(te.cloneDeep)(t),e.delegateYield(Et(a),"t0",6);case 6:return r=e.t0,c=!dt(a),e.next=10,Object(tt.c)(Object(ge.a)([at(a),nt(r)].concat(Object(_e.a)(c?[_(n.Finished)]:[]))));case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(0),console.warn("Error occurred during initiation the field.",e.t1);case 15:case"end":return e.stop()}}),bt,null,[[0,12]])}var gt=De.a.mark(Ot);function Ot(e){var t,a,r,c,l;return De.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(tt.d)(Y);case 3:if(o.sent!==n.Finished){o.next=6;break}return o.abrupt("return");case 6:return o.next=8,Object(tt.d)(ue);case 8:if(t=o.sent,a=Object(te.cloneDeep)(t),r=e.payload.direction,mt(t,a,r),!Object(te.isEqual)(t,a)){o.next=15;break}return console.log("There are no any moves in this direction. Choose another one, please."),o.abrupt("return");case 15:return o.delegateYield(Et(a),"t0",16);case 16:return c=o.t0,l=!dt(a),o.next=20,Object(tt.c)(Object(ge.a)([at(a),nt(c)].concat(Object(_e.a)(l?[_(n.Finished)]:[]))));case 20:!window.TEST_MODE&&l&&alert("No more possible moves!"),o.next=26;break;case 23:o.prev=23,o.t1=o.catch(0),console.warn("Error occurred during moving.",o.t1);case 26:case"end":return o.stop()}}),gt,null,[[0,23]])}var yt=De.a.mark(_t);function _t(e){var t,a,r,c,l;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,confirm("Do you want to start over?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(tt.d)(H);case 6:return t=e.sent,e.next=9,Object(tt.d)(Z);case 9:return a=e.sent,r=Ve(t,a),c=r.field,l=r.addedCells,e.next=13,Object(tt.c)(Object(ge.a)([h(t),at(c),_(n.InProgress),nt(l)]));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.warn("Error occurred during starting over.",e.t0);case 18:case"end":return e.stop()}}),yt,null,[[0,15]])}var ht=[Object(tt.e)(O.CHANGE_GAME_PLAY_MODE,ct),Object(tt.e)(O.CHANGE_GAME_SIZE,ot),Object(tt.e)(O.CHANGE_SERVER_URL,ut),Object(tt.e)(O.INITIATE_FIELD,vt),Object(tt.e)(O.MOVE,Ot),Object(tt.e)(O.START_OVER,_t)],St=De.a.mark(jt);function jt(){var e;return De.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(_e.a)(ht),t.next=3,Object(tt.a)(e);case 3:case"end":return t.stop()}}),St)}var xt=Object(ye.a)(),Tt=Object(ve.createStore)(Object(ge.b)(et),Object(Oe.composeWithDevTools)(Object(ve.applyMiddleware)(xt)));xt.run(jt);var wt=Tt;s.a.render(i.a.createElement(m.a,{store:wt},i.a.createElement(be,null)),document.getElementById("root")),document.addEventListener("keyup",(function(e){var t=e.code,a=wt.getState().controls.gameMode===r.Flat,n=a?v:b;if((a?E:p).includes(t))return wt.dispatch(y(n[t]))}))}},[[49,1,2]]]);